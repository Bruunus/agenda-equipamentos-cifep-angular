<div>
  <h3>Reserva eventual</h3>

  <form (ngSubmit)="processForm()" [formGroup]="formValidation" #formDir="ngForm">


  <label for="responsavel">Nome</label> &nbsp;
  <input type="text" name="nome" formControlName="nome" required>

  <div *ngIf="nome!.invalid && formDir.submitted" class="validation-error">
    <p *ngIf="nome.errors?.['required']" style="font-size: 0.8rem; color: tomato;">
      Nome obrigatório
    </p>
    <!-- <p *ngIf="nome.errors?.['maxlength']">Até 30 caracter</p> -->
  </div>

  <br>

  <label for="sobrenome">Sobrenome</label> &nbsp;
  <input #valid type="text" name="sobrenome" formControlName="sobrenome" required>

  <div *ngIf="sobrenome!.invalid && formDir.submitted" class="validation-error">
    <p *ngIf="sobrenome.errors?.['required']" style="font-size: 0.8rem; color: tomato;">
      Sobrenome obrigatório
    </p>
    <!-- <p *ngIf="nome.errors?.['maxlength']">Até 30 caracter</p> -->
  </div>

  <br>

  <label for="setor">Setor</label> &nbsp;
  <input #valid type="text" name="setor" formControlName="setor" required>
  <div *ngIf="setor!.invalid && formDir.submitted" class="validation-error">
    <p *ngIf="setor.errors?.['required']" style="font-size: 0.8rem; color: tomato;">
      Setor obrigatório
    </p>
    <!-- <p *ngIf="nome.errors?.['maxlength']">Até 30 caracter</p> -->
  </div>


  <br><br>

  <label for="dataRetirada">Data início:</label> &nbsp;
  <input #valid type="date" formControlName="dataRetirada" required> &nbsp;
  <div *ngIf="dataRetirada!.invalid && formDir.submitted" class="validation-error">
    <span *ngIf="dataRetirada.errors?.['required']" style="font-size: 0.8rem; color: tomato;">
      Insira a data de início da reserva
    </span>
    <!-- <p *ngIf="nome.errors?.['maxlength']">Até 30 caracter</p> -->
  </div>




  <label for="hr-agendamento">Hora início:</label>
  <select #valid name="horaRetirada"  formControlName="horaInicioSelect" required>
      <option name="horaRetirada" *ngFor="let option of optionsHours" [value]="option.valor">{{ option.descricao }}</option>
  </select>
  <div *ngIf="horaInicioSelect!.invalid && formDir.submitted" class="validation-error">
    <span *ngIf="horaInicioSelect.errors?.['required']" style="font-size: 0.8rem; color: tomato;">
      Insira o horário da retirada
    </span>
    <!-- <p *ngIf="nome.errors?.['maxlength']">Até 30 caracter</p> -->
  </div>



  <div class="row">
    <div class="col">

      <label for="dt-agendamento">Data fim:</label> &nbsp;
      <input #valid style="margin-left: 1.06em;" type="date" name="dataDevolucao" formControlName="dataDevolucao" required> &nbsp;
      <div *ngIf="dataDevolucao!.invalid && formDir.submitted" class="validation-error">
        <span *ngIf="dataDevolucao.errors?.['required']" style="font-size: 0.8rem; color: tomato;">
          Insira a data de devolução da reserva
        </span>
        <!-- <p *ngIf="nome.errors?.['maxlength']">Até 30 caracter</p> -->
      </div>

      <!-- Validador de datas -->
      <!-- <div *ngIf="formValidation.controls['dataDevolucao'].value < formValidation.controls['dataRetirada'].value">
        <span style="font-size: 0.8rem; color: tomato;">
          A data de devolução não pode ser menor que a data de retirada
        </span>
      </div> -->


      <label for="hr-agendamento">Hora fim:</label> &nbsp;
      <select #valid name="horaDevolucaoSelect" formControlName="horaDevolucaoSelect" required>
        <option *ngFor="let option of optionsHours" [value]="option.valor">{{ option.descricao }}</option>
      </select>
      <div *ngIf="horaDevolucaoSelect!.invalid && formDir.submitted" class="validation-error">
        <span *ngIf="horaDevolucaoSelect.errors?.['required']" style="font-size: 0.8rem; color: tomato;">
          Insira o horário da devolução
        </span>
        <!-- <p *ngIf="nome.errors?.['maxlength']">Até 30 caracter</p> -->
      </div>






      </div>
  </div>

  <table id="table-adicionar">
    <tr>
      <td>
        <label for="equipamento">Equipamento</label>
        <select #equipamentoValid  name="equipamento" formControlName="equipamentoSelect">
          <option value=""></option>
          <option *ngFor="let item of optionsListaEquipamento" [value]="item.valor">{{ item.descricao }}</option>
        </select>
      </td>


      <td>
        <label for="quantidade">Quantidade</label>
        <select #quantidadeValid formControlName="quantidadeSelect" >
          <option name="selectedOptionListaQuantidade" *ngFor="let qtd of optionQuantidade" [value]="qtd.valor">{{ qtd.descricao }}</option>
        </select>
      </td>
      <td>
        <button (click)="adicionarEquipamento($event)">Adicionar</button>
      </td>

    </tr>
  </table>





      <table id="table-equipamento">
        <thead>
          <th>Equipamento</th>
          <th>Quantidade</th>
        </thead>
        <tbody>
          <tr>
            <td colspan="2">
              <ul>
                <!-- template -->
                <li id="template-li" class="row"
                *ngFor="let equipamento of listaEquipamento; let i = index" [attr.data-id]="equipamento.id">
                  <td class="col">{{ equipamento.descricao }}</td>
                  <td class="col-6">
                    <div class="row justify-content-between">
                        <span>{{ equipamento.quantidade }}</span>
                        <span (click)="removerEquipamento($event)" class="delete">x</span>
                    </div>
                  </td>
                </li>
                <!-- template -->
              </ul>
            </td>
          </tr>
        </tbody>
      </table>


    <br><br>

   <button type="submit" style="width: 150px; margin-block-start: 50px;">Criar</button>


  </form>



</div>


<br><br><br>

<h4>Sprint</h4>
<ul style="color: tomato;">
  <li style="color: green;"><s>Limpar todos os campos após clicar no botão "Criar"</s></li>
  <li style="color: green;"><s>Criar validação: Nenhum campo pode estar vazio</s></li>
  <li>Criar validação para <b>adicionar data agendada</b>
    <ul><br>

      <li style="color: green;"><s>Não pode uma data de devolução ser menor que a data de retirada</s></li>
      <li style="color: green;"><s>Não pode fazer um agendamento com datas anteriores ao dia atual</s></li>
      <li>
        Se caso a hora de devolução for menor que a hora de inicio o sistema deve alterar a data de devlução
        para o dia seguinte pega referenciando a data de início
      </li>
      <li>
        O Expediênte é até as 18:00 - Se caso o agendamento  "Hora início" for a partir
        das 18:00hs o sistema deve trocar automaticamente em "Data fim"
        para o dia seguinte de acordo com o campo "Data início" colocada.
        <br><br>
        E se a "Data início" for em uma sexta-feira e hora fim estiver
        a partir das 17:00hs então o sistema deve trocar automaticamente em "Data fim" para a segunda-feira seguinte da semana pulando sábado
        e domingo.
        <br><br>
      </li>

    </ul>
  </li>
  <li>Criar validação para <b>adicionar equipamento</b>:
      <ul>
        <li>Não pode adicionar um equipamento sem quantidade</li>
        <li>Não pode adicionar uma quantidade sem equipamento</li>
        <li>Não pode adicionar o mesmo equipamento 2x</li>
        <li>
          Validade a quantidade solicitada ao adicionar com o estoque disponível, caso não tiver disponível emita o aviso
          e não deixa passar o formulário
        </li>
      </ul>
  </li>
  <li>
    Liberar o campo 'sobrenome' na classe eventual.compoent.ts quando o backend estiver ajustado
  </li>
  <li>
    Tratar do [option] 'Outros' => Ao ser selecionado junto com a quantidade, dentro da tabela de equipamentos
    deve aparecer um input para o usuário fornecer a descrição do equipamento. <br>
    Salve este valor no banco e forneça um aviso "Este equipamento não será monitorado no painel de estoque.
    para isso adicione esse novo equipamentos em Configurações > Adicionar novo equipamento"
  </li>
  <li>
    Limpar a lista de equipamentos - Quando o submit der certo limpe a lista.
  </li>
</ul>

